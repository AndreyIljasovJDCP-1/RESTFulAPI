## Итоговая работа по модулю SPRING «RESTFul API права пользователя».

![logo](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTFhVIKHS77LnlY32T-ZIEsxpSBLUK6D0PRKg&usqp=CAU)

### **Задача:**  
- разработать API сервис авторизации пользователей по логину и паролю соотвествующее принципам RESTFul.  
- реализовать обработчик ошибок.
- реализовать обработчик пользовательских параметров (@Аннотация)  
- реализовать хранение базы данных IN MEMORY (Hibernate)
#### *Дополнительное задание:*
- при запросе на удаление пользовательские данные не удаляют, а помечают на удаление. 
- добавить возможность авторизоваться из формы (1 форма на авторизацию и добавление/обновление)  
- реализовать хранение базы данных на сервере Apache(NGINX) (PostgreSQL, MySQL)

##### Примечание: для ра. 

#### Ресурсы:
 1. для работы с базой данных используется библиотека `pring-boot-starter-data-jpa`, подключение:
       <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>
2. для хранения базы данных IN MEMORY используется библиотека `Hibernate`, подключение:
       <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>  
Основные инструменты  этой библиотеки:
* Cоздать объект pdf-документа `var doc = new PdfDocument(new PdfReader(pdf))`.
* Узнать количество  страниц в pdf-документе ` var pages= doc.getNumberOfPages()`.
* Получить объект одной страницы pdf-документа `var page = doc.getPage(номерСтраницы)`.
* Получить текст со pdf-страницы `var text = PdfTextExtractor.getTextFromPage(page);`.

### Реализация.   

| Класс      | Описание |
| ----------- | ----------- |
| `Main`      | запуск сервера, обслуживающего поисковые запросы|
| `PageEntry`   | Класс, описывающий один элемент результата одного поиска. Он состоит из имени pdf-файла, номера страницы и количества раз(`count`), которое встретилось это слово на ней. Реализует интерфейс `Comparable` для сортировки.|
| `SearchEngine`   | Интерфейс, описывающий поисковый движок, содержит 1 метод ` List<PageEntry> search(String request)`|
| `BooleanSearchEngine`   | **Реализация поискового движка.** <ol><li>Движок ищет в тексте ровно то слово, которое было указано, без использования синонимов и прочих приёмов нечёткого поиска, независимо от регистра.</li><li>Для ускорения поиска используется **индексация** - предварительное сканирование файлов в конструкторе класса с сохранением информации для каждого слова в виде `List<PageEntry>`.</li><li>Для сохранения всех результатов индексации используется HashMap(ключ: слово, значение:`List<PageEntry>`).</li>  <li>Метод **search(String request)**  аккумулирует результаты поиска в Map через Collectors.toMap (элементы группируются по ключу: (имя файла:страница) у дубликатов суммируется значение поля count и возвращается 1-й элемент) и возвращает коллекцию значений `values() т.е List<PageEntry>` с итогами поиска</li>|
| `Server`   | сервер, слушающий порт `8085`, на который приходят запросы. Ответ сервера - это результат вызова метода `search(request)`, в виде JSON-текста |

Пример ответа на запрос:
```json
[
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 12,
    "count": 6
  },
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 4,
    "count": 3
  },
  {
    "pdfName": "Этапы оценки проекта_ понятия, методы и полезные инструменты.pdf",
    "page": 5,
    "count": 3
  }
]
```
